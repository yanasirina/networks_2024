# Как работает на практике протокол SSL?

Протокол SSL (Secure Sockets Layer), ныне заменённый TLS (Transport Layer Security), обеспечивает безопасную передачу данных между клиентом и сервером через шифрованное соединение. Его работа включает следующие этапы:

## 1. **Установление соединения (Handshaking):**
   - **Клиент инициирует соединение:**
     - Клиент отправляет серверу "Hello" сообщение, содержащее информацию о поддерживаемых версиях SSL/TLS, наборах шифров, сжатии и случайное число.
   - **Сервер отвечает:**
     - Сервер отправляет "Hello" сообщение с выбором версии SSL/TLS, набора шифров и другого. Также передаёт сертификат (с открытым ключом) для аутентификации.
   - **Клиент проверяет сертификат:**
     - Проверяется подлинность сертификата с помощью цепочки доверия и удостоверяющего центра (CA). Если сертификат не доверен, соединение может быть прервано.

## 2. **Установление общего секрета:**
   - **Алгоритм Диффи-Хеллмана или RSA:**
     - Клиент генерирует сессионный ключ (симметричный ключ для шифрования данных), шифрует его открытым ключом сервера и отправляет серверу.
     - Сервер расшифровывает сессионный ключ своим закрытым ключом.

## 3. **Создание защищённого канала:**
   - Клиент и сервер используют общий сессионный ключ для шифрования данных, передаваемых между ними.

## 4. **Шифрование и передача данных:**
   - Все данные, отправленные между клиентом и сервером, шифруются сессионным ключом с использованием симметричных алгоритмов (например, AES).
   - Целостность данных проверяется с помощью HMAC (ключевая хэш-функция).

## 5. **Завершение соединения:**
   - По окончании обмена данных стороны обмениваются сообщениями завершения. Соединение закрывается, а сессионные ключи уничтожаются.

## Основные свойства:
- **Аутентификация:** Сертификаты подтверждают, что сервер (и иногда клиент) является подлинным.
- **Шифрование:** Все передаваемые данные защищены от перехвата.
- **Целостность:** Гарантируется, что данные не были изменены при передаче.

Протокол SSL/TLS используется для защиты интернет-соединений, таких как HTTPS, почтовых сервисов (IMAP, SMTP), VPN, и многих других.